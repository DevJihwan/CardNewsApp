# 카드뉴스 요약 앱 - 요구사항 명세서

## 프로젝트 개요
사용자가 업로드한 Word 또는 PDF 파일을 Claude API를 활용하여 카드뉴스 형태로 요약하는 iOS 앱

## 주요 기능

### 1. 파일 업로드 및 처리
- **지원 파일 형식**: .docx, .pdf
- **파일 크기 제한**: 최대 10MB
- **업로드 방식**: 파일 앱에서 선택 (DocumentPicker)
- **파일 검증**: 형식 및 크기 검증, 손상된 파일 감지

### 2. 요약 기능
- **AI 엔진**: Claude API 활용
- **요약 스타일**: 카드뉴스 형태로 구조화
- **카드 구성**: 사용자 선택 가능 (4컷/6컷/8컷)
- **언어 지원**: 한국어, 영어 자동 감지

### 3. 출력 형식
사용자가 선택 가능한 3가지 형식:
- **웹툰 형식**: 말풍선과 캐릭터를 활용한 스토리텔링
- **텍스트 형식**: 깔끔한 텍스트 기반 카드
- **이미지 형식**: 인포그래픽 스타일의 시각적 카드

### 4. 템플릿 시스템
- **카테고리별 템플릿**: 
  - 비즈니스 보고서
  - 학술 논문
  - 뉴스 기사
  - 일반 문서
- **커스터마이징**: 색상, 폰트, 레이아웃 조정

## 수익화 모델

### 1. 과금 정책
- **프리미엄 모델**: 첫 요약 1회 무료, 이후 월 구독
- **구독료**: 월 $4.99 (약 6,900원)
- **결제 방식**: App Store 인앱 구매 (Auto-renewable Subscription)
- **회원가입**: 불필요 (디바이스 기반 추적)

### 2. 사용량 추적 방식
**디바이스 기반 추적 (회원가입 불필요)**
- **IDFV (Identifier for Vendor)** 활용하여 디바이스 고유 식별
- **iOS Keychain** 에 사용 이력 암호화 저장
- **앱 삭제/재설치 대응**: Keychain 데이터는 유지됨
- **개인정보 보호**: 어떤 개인정보도 수집하지 않음

### 3. 구독 관리
- **StoreKit 2** 활용한 구독 상태 관리
- **영수증 검증**: 로컬 검증으로 서버 의존도 최소화
- **구독 복원**: Apple ID 기반 자동 복원
- **가족 공유**: Apple 정책에 따라 자동 지원

### 4. 사용량 제한 로직
```
if (구독 활성 상태) {
    모든 컷 수 무제한 사용 허용
} else if (무료 사용 횟수 < 1) {
    4컷 카드뉴스만 허용 + 무료 횟수 차감
} else {
    구독 안내 화면 표시 (6컷, 8컷은 프리미엄 기능)
}
```

## 사용자 인터페이스

### 1. 메인 화면
- 파일 업로드 버튼
- 최근 요약 목록
- 설정 메뉴

### 2. 요약 설정 화면
- 출력 형식 선택
- 템플릿 선택
- 카드 컷 수 설정 (4컷/6컷/8컷)
- 언어 설정

### 3. 결과 화면
- 카드뉴스 뷰어
- 페이지 네비게이션
- 공유 기능
- 저장 기능

### 4. 히스토리 화면
- 요약 히스토리 목록
- 검색 기능
- 즐겨찾기 관리
- 삭제 기능

### 5. 구독 관리 화면
- **프리미엄 기능 안내**: 6컷/8컷 카드뉴스, 무제한 요약, 고급 템플릿
- **구독 상태 표시**: 현재 구독 정보, 만료일
- **구독/복원 버튼**: StoreKit 인터페이스
- **사용량 표시**: 무료 사용 횟수 (구독 전, 4컷만 가능)

## 기술 요구사항

### 1. 개발 환경
- **플랫폼**: iOS 15.0+
- **개발 언어**: Swift
- **UI 프레임워크**: SwiftUI
- **아키텍처**: MVVM 패턴

### 2. 외부 API
- **Claude API**: 텍스트 요약 및 분석
- **파일 처리**: PDFKit (PDF), 서드파티 라이브러리 (Word)

### 3. 데이터 저장
- **로컬 저장**: Core Data
- **파일 저장**: Documents Directory
- **캐시**: NSCache 활용
- **사용량 추적**: iOS Keychain (디바이스 고유 정보)
- **구독 정보**: StoreKit Transaction 로컬 저장

### 4. 네트워킹
- **HTTP 클라이언트**: URLSession
- **에러 처리**: 네트워크 상태 체크, 재시도 로직
- **보안**: API 키 보안 저장 (Keychain)

### 5. 인앱 구매 (StoreKit 2)
- **구독 상품 관리**: App Store Connect 설정
- **영수증 검증**: 로컬 및 서버 검증 (옵션)
- **구독 상태 추적**: Transaction Observer 구현
- **결제 복원**: RestoreCompletedTransactions

## 사용자 경험 (UX)

### 1. 성능 요구사항
- **파일 업로드**: 10MB 파일 기준 30초 이내
- **요약 생성**: 4컷 기준 45초, 6컷 기준 60초, 8컷 기준 90초 이내
- **UI 반응성**: 모든 액션 0.3초 이내 반응

### 2. 사용성
- **진행 상태 표시**: 로딩 인디케이터, 진행률 바
- **에러 메시지**: 사용자 친화적 에러 안내
- **오프라인 지원**: 저장된 요약 오프라인 뷰어

### 3. 접근성
- **VoiceOver 지원**: 시각 장애인 접근성
- **Dynamic Type**: 텍스트 크기 조절
- **색상 대비**: WCAG 가이드라인 준수

## 보안 및 개인정보

### 1. 데이터 보호
- **파일 암호화**: 로컬 저장 파일 암호화
- **API 통신**: HTTPS 프로토콜
- **개인정보**: 최소한의 정보만 수집

### 2. 권한 관리
- **파일 접근**: 사용자 명시적 동의
- **네트워크**: 인터넷 연결 필요 알림

## 배포 및 유지보수

### 1. 앱스토어 배포
- **카테고리**: 생산성 도구
- **연령 등급**: 4+
- **가격 정책**: 무료 다운로드 + 인앱 구매

### 2. 버전 관리
- **업데이트 주기**: 월 1회 정기 업데이트
- **버그 수정**: 주요 이슈 발생 시 긴급 패치
- **기능 추가**: 사용자 피드백 기반 개선

## 향후 확장 계획

### 1. 추가 기능
- **음성 요약**: TTS 기능
- **번역 기능**: 다국어 번역
- **협업 기능**: 공유 및 댓글
- **클라우드 동기화**: iCloud 연동
- **추가 업로드 방식**: 
  - 다른 앱에서 공유 (Share Extension)
  - 드래그 앤 드롭 지원
  - 카메라로 문서 스캔

### 2. 플랫폼 확장
- **macOS**: Catalyst 활용
- **웹 버전**: 브라우저 지원
- **Android**: 크로스 플랫폼 고려

## 성공 지표 (KPI)

### 1. 사용자 지표
- **일일 활성 사용자** (DAU): 목표 1,000명
- **월간 활성 사용자** (MAU): 목표 10,000명
- **사용자 유지율**: 1개월 후 30% 이상

### 2. 기능 지표
- **요약 성공률**: 95% 이상
- **사용자 만족도**: 4.0/5.0 이상
- **앱 크래시율**: 1% 미만

### 3. 수익 지표
- **무료→유료 전환율**: 5% 이상
- **구독 갱신율**: 월 80% 이상
- **ARPU (사용자당 평균 매출)**: $2.5 이상
- **LTV (고객 생애 가치)**: $15 이상

## 리스크 및 대응 방안

### 1. 기술적 리스크
- **Claude API 장애**: 캐시 활용, 대체 AI 서비스 준비
- **파일 처리 오류**: 상세한 에러 로깅 및 처리 로직

### 2. 비즈니스 리스크
- **API 비용 증가**: 사용량 모니터링, 과금 알림
- **경쟁사 출현**: 차별화된 UX 강화

## 개발 일정

### Phase 1 (3주)
- 기본 UI 구현
- 파일 업로드 기능 (DocumentPicker만)
- Claude API 연동

### Phase 2 (3주)
- 요약 기능 구현
- 3가지 출력 형식 개발
- 템플릿 시스템
- **인앱 구매 구현** (StoreKit 2)

### Phase 3 (2주)
- 히스토리 관리
- 공유 기능
- **사용량 추적 시스템**
- 구독 관리 UI
- 테스트 및 버그 수정

### Phase 4 (1주)
- 앱스토어 제출 준비
- 최종 테스트 및 배포

---

**작성일**: 2025년 6월 24일  
**작성자**: DevJihwan  
**버전**: 1.0